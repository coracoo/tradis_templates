{"id":6,"name":"runtipi","category":"network","description":"","version":"","logo":"","website":"","tutorial":"","dotenv":"LOG_LEVEL=debug\nDOMAIN=http://192.168.2.67\nLOCAL_DOMAIN=http://192.168.2.67\n","compose":"services:\n  runtipi-reverse-proxy:\n    container_name: runtipi-reverse-proxy\n    depends_on:\n      runtipi:\n        condition: service_healthy\n    image: traefik:v3.5\n    restart: unless-stopped\n    ports:\n      - 3180:80\n      - 3143:443\n    command: --providers.docker\n    volumes:\n      - ./traefik:/etc/traefik\n      - ./traefik/shared:/shared\n      - /var/run/docker.sock:/var/run/docker.sock:ro\n    networks:\n      - tipi_main_network\n\n  runtipi-db:\n    container_name: runtipi-db\n    image: postgres:14\n    restart: unless-stopped\n    stop_grace_period: 1m\n    volumes:\n      - ./data/postgres:/var/lib/postgresql/data\n    environment:\n      POSTGRES_PASSWORD: postgres\n      POSTGRES_USER: tipi\n      POSTGRES_DB: tipi\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -d tipi -U tipi\"]\n      interval: 5s\n      timeout: 10s\n      retries: 20\n      start_period: 5s\n    networks:\n      - tipi_main_network\n\n  runtipi-queue:\n    container_name: runtipi-queue\n    image: rabbitmq:4-alpine\n    restart: unless-stopped\n    environment:\n      RABBITMQ_DEFAULT_USER: tipi\n      RABBITMQ_DEFAULT_PASS: rabbitmq\n    networks:\n      - tipi_main_network\n\n  runtipi:\n    container_name: runtipi\n    healthcheck:\n      start_period: 10s\n      test: [\"CMD\", \"curl\", \"-f\", \"http://localhost:3000/api/health\"]\n      interval: 5s\n      timeout: 10s\n      retries: 20\n    image: ghcr.nju.edu.cn/runtipi/runtipi:v4.4.0\n    env_file:\n      - path: .env\n    restart: unless-stopped\n    depends_on:\n      runtipi-db:\n        condition: service_healthy\n      runtipi-queue:\n        condition: service_started\n    volumes:\n      # Data\n      - ./media:/data/media\n      - ./state:/data/state\n      - ./repos:/data/repos\n      - ./apps:/data/apps\n      - ./logs:/data/logs\n      - ./traefik:/data/traefik\n      - ./user-config:/data/user-config\n      - ./app-data:/app-data\n      - ./backups:/data/backups\n      # Static\n      #- ./config.env:/data/.env\n      - ./cache:/cache\n      - ./runtipi.yml:/data/docker-compose.yml\n      - /var/run/docker.sock:/var/run/docker.sock:ro\n      - /proc:/host/proc\n      - /etc/localtime:/etc/localtime:ro\n      - /etc/timezone:/etc/timezone:ro\n    environment:\n      LOCAL: true\n      NODE_ENV: production\n      ROOT_FOLDER_HOST: /home/ttdocker/docker-manager/client/backend/project\n      POSTGRES_USERNAME: tipi\n      POSTGRES_PASSWORD: postgres\n      RABBITMQ_USERNAME: tipi\n      RABBITMQ_PASSWORD: rabbitmq\n      RABBITMQ_HOST: runtipi-queue\n      INTERNAL_IP: 192.168.0.120\n      TIPI_VERSION: 0.0.0\n      LOG_LEVEL: debug\n      APPS_REPO_ID: 67a91b6b7bc618c3916b04af5c9aa896a7f0416d762ee96f0cb350b1aab74a10\n      APPS_REPO_URL: https://github.com/runtipi/runtipi-appstore\n    networks:\n      - tipi_main_network\n    labels:\n      # ---- General ----- #\n      runtipi.managed: true\n      traefik.enable: true\n      traefik.http.middlewares.redirect-to-https.redirectscheme.scheme: https\n      traefik.http.middlewares.runtipi.forwardauth.address: http://runtipi:3000/api/auth/traefik}\n\n      # ---- Dashboard ----- #\n      traefik.http.services.dashboard.loadbalancer.server.port: 3000\n      # Local ip\n      traefik.http.routers.dashboard.rule: PathPrefix(\"/\")\n      traefik.http.routers.dashboard.service: dashboard\n      traefik.http.routers.dashboard.entrypoints: web\n      # Websecure\n      traefik.http.routers.dashboard-insecure.rule: Host(`${DOMAIN}`) \u0026\u0026 PathPrefix(`/`)\n      traefik.http.routers.dashboard-insecure.service: dashboard\n      traefik.http.routers.dashboard-insecure.entrypoints: web\n      traefik.http.routers.dashboard-insecure.middlewares: redirect-to-https\n      traefik.http.routers.dashboard-secure.rule: Host(`${DOMAIN}`) \u0026\u0026 PathPrefix(`/`)\n      traefik.http.routers.dashboard-secure.service: dashboard\n      traefik.http.routers.dashboard-secure.entrypoints: websecure\n      traefik.http.routers.dashboard-secure.tls.certresolver: myresolver\n      # Local domain\n      traefik.http.routers.dashboard-local-insecure.rule: Host(`${LOCAL_DOMAIN}`)\n      traefik.http.routers.dashboard-local-insecure.entrypoints: web\n      traefik.http.routers.dashboard-local-insecure.service: dashboard\n      traefik.http.routers.dashboard-local-insecure.middlewares: redirect-to-https\n      # Secure\n      traefik.http.routers.dashboard-local.rule: Host(`${LOCAL_DOMAIN}`)\n      traefik.http.routers.dashboard-local.entrypoints: websecure\n      traefik.http.routers.dashboard-local.tls: true\n      traefik.http.routers.dashboard-local.service: dashboard\n      \nnetworks:\n  tipi_main_network:\n    driver: bridge\n    name: runtipi_tipi_main_network","screenshots":[],"schema":[{"name":"3180","label":"3180","description":"","type":"port","default":"80","category":"basic","serviceName":"runtipi-reverse-proxy","paramType":"port"},{"name":"3143","label":"3143","description":"","type":"port","default":"443","category":"basic","serviceName":"runtipi-reverse-proxy","paramType":"port"},{"name":"./traefik","label":"./traefik","description":"","type":"path","default":"/etc/traefik","category":"advanced","serviceName":"runtipi-reverse-proxy","paramType":"path"},{"name":"./traefik/shared","label":"./traefik/shared","description":"","type":"path","default":"/shared","category":"advanced","serviceName":"runtipi-reverse-proxy","paramType":"path"},{"name":"/var/run/docker.sock","label":"/var/run/docker.sock","description":"","type":"path","default":"/var/run/docker.sock","category":"advanced","serviceName":"runtipi-reverse-proxy","paramType":"path"},{"name":"./data/postgres","label":"./data/postgres","description":"","type":"path","default":"/var/lib/postgresql/data","category":"advanced","serviceName":"runtipi-db","paramType":"path"},{"name":"POSTGRES_PASSWORD","label":"POSTGRES_PASSWORD","description":"","type":"password","default":"postgres","category":"advanced","serviceName":"runtipi-db","paramType":"env"},{"name":"POSTGRES_USER","label":"POSTGRES_USER","description":"","type":"string","default":"tipi","category":"advanced","serviceName":"runtipi-db","paramType":"env"},{"name":"POSTGRES_DB","label":"POSTGRES_DB","description":"","type":"string","default":"tipi","category":"advanced","serviceName":"runtipi-db","paramType":"env"},{"name":"RABBITMQ_DEFAULT_USER","label":"RABBITMQ_DEFAULT_USER","description":"","type":"string","default":"tipi","category":"advanced","serviceName":"runtipi-queue","paramType":"env"},{"name":"RABBITMQ_DEFAULT_PASS","label":"RABBITMQ_DEFAULT_PASS","description":"","type":"string","default":"rabbitmq","category":"advanced","serviceName":"runtipi-queue","paramType":"env"},{"name":"./media","label":"./media","description":"","type":"path","default":"/data/media","category":"advanced","serviceName":"runtipi","paramType":"path"},{"name":"./state","label":"./state","description":"","type":"path","default":"/data/state","category":"advanced","serviceName":"runtipi","paramType":"path"},{"name":"./repos","label":"./repos","description":"","type":"path","default":"/data/repos","category":"advanced","serviceName":"runtipi","paramType":"path"},{"name":"./apps","label":"./apps","description":"","type":"path","default":"/data/apps","category":"advanced","serviceName":"runtipi","paramType":"path"},{"name":"./logs","label":"./logs","description":"","type":"path","default":"/data/logs","category":"advanced","serviceName":"runtipi","paramType":"path"},{"name":"./traefik","label":"./traefik","description":"","type":"path","default":"/data/traefik","category":"advanced","serviceName":"runtipi","paramType":"path"},{"name":"./user-config","label":"./user-config","description":"","type":"path","default":"/data/user-config","category":"advanced","serviceName":"runtipi","paramType":"path"},{"name":"./app-data","label":"./app-data","description":"","type":"path","default":"/app-data","category":"advanced","serviceName":"runtipi","paramType":"path"},{"name":"./backups","label":"./backups","description":"","type":"path","default":"/data/backups","category":"basic","serviceName":"runtipi","paramType":"path"},{"name":"./cache","label":"./cache","description":"","type":"path","default":"/cache","category":"advanced","serviceName":"runtipi","paramType":"path"},{"name":"./runtipi.yml","label":"./runtipi.yml","description":"","type":"path","default":"/data/docker-compose.yml","category":"advanced","serviceName":"runtipi","paramType":"path"},{"name":"/var/run/docker.sock","label":"/var/run/docker.sock","description":"","type":"path","default":"/var/run/docker.sock","category":"advanced","serviceName":"runtipi","paramType":"path"},{"name":"/proc","label":"/proc","description":"","type":"path","default":"/host/proc","category":"advanced","serviceName":"runtipi","paramType":"path"},{"name":"/etc/localtime","label":"/etc/localtime","description":"","type":"path","default":"/etc/localtime","category":"advanced","serviceName":"runtipi","paramType":"path"},{"name":"/etc/timezone","label":"/etc/timezone","description":"","type":"path","default":"/etc/timezone","category":"advanced","serviceName":"runtipi","paramType":"path"},{"name":"LOCAL","label":"LOCAL","description":"","type":"string","default":"true","category":"advanced","serviceName":"runtipi","paramType":"env"},{"name":"NODE_ENV","label":"NODE_ENV","description":"","type":"string","default":"production","category":"advanced","serviceName":"runtipi","paramType":"env"},{"name":"ROOT_FOLDER_HOST","label":"ROOT_FOLDER_HOST","description":"","type":"string","default":"/home/ttdocker/docker-manager/client/backend/project","category":"basic","serviceName":"runtipi","paramType":"env"},{"name":"POSTGRES_USERNAME","label":"POSTGRES_USERNAME","description":"","type":"string","default":"tipi","category":"advanced","serviceName":"runtipi","paramType":"env"},{"name":"POSTGRES_PASSWORD","label":"POSTGRES_PASSWORD","description":"","type":"password","default":"postgres","category":"advanced","serviceName":"runtipi","paramType":"env"},{"name":"RABBITMQ_USERNAME","label":"RABBITMQ_USERNAME","description":"","type":"string","default":"tipi","category":"advanced","serviceName":"runtipi","paramType":"env"},{"name":"RABBITMQ_PASSWORD","label":"RABBITMQ_PASSWORD","description":"","type":"password","default":"rabbitmq","category":"advanced","serviceName":"runtipi","paramType":"env"},{"name":"RABBITMQ_HOST","label":"RABBITMQ_HOST","description":"","type":"string","default":"runtipi-queue","category":"advanced","serviceName":"runtipi","paramType":"env"},{"name":"INTERNAL_IP","label":"INTERNAL_IP","description":"","type":"string","default":"192.168.0.120","category":"basic","serviceName":"runtipi","paramType":"env"},{"name":"TIPI_VERSION","label":"TIPI_VERSION","description":"","type":"string","default":"0.0.0","category":"advanced","serviceName":"runtipi","paramType":"env"},{"name":"LOG_LEVEL","label":"LOG_LEVEL","description":"","type":"string","default":"debug","category":"advanced","serviceName":"runtipi","paramType":"env"},{"name":"APPS_REPO_ID","label":"APPS_REPO_ID","description":"","type":"string","default":"67a91b6b7bc618c3916b04af5c9aa896a7f0416d762ee96f0cb350b1aab74a10","category":"advanced","serviceName":"runtipi","paramType":"env"},{"name":"APPS_REPO_URL","label":"APPS_REPO_URL","description":"","type":"string","default":"https://github.com/runtipi/runtipi-appstore","category":"advanced","serviceName":"runtipi","paramType":"env"},{"name":"DOMAIN","label":"DOMAIN","description":"","type":"string","default":"","category":"basic","serviceName":"Global","paramType":"env"},{"name":"LOCAL_DOMAIN","label":"LOCAL_DOMAIN","description":"","type":"string","default":"","category":"basic","serviceName":"Global","paramType":"env"}]}